{% extends 'base.html.twig' %}

{% block title %}Nouvel utilisateur - BlogSphere{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('css/admin.css') }}">
{% endblock %}

{% block body %}
<div class="create-user-container">
    <div class="container">
        <a href="{{ path('admin_users_index') }}" class="back-btn">← Retour aux utilisateurs</a>

        <div class="form-wrapper">
            {# Header avec icône #}
            <div class="form-header">
                <div class="form-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <line x1="19" y1="8" x2="19" y2="14"></line>
                        <line x1="22" y1="11" x2="16" y2="11"></line>
                    </svg>
                </div>
                <h1 class="form-title">Créer un nouvel utilisateur</h1>
                <p class="form-subtitle">Ajoutez un nouveau membre à BlogSphere</p>
            </div>

            {# Formulaire #}
            <div class="form-content">
                {{ form_start(form, {'attr': {'class': 'user-form'}}) }}
                
                {# Nom #}
                <div class="form-group">
                    <label for="{{ form.name.vars.id }}" class="form-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        Nom complet
                    </label>
                    {{ form_widget(form.name, {
                        'attr': {
                            'class': 'form-input',
                            'placeholder': 'Entrez le nom complet'
                        }
                    }) }}
                    {{ form_errors(form.name) }}
                </div>

                {# Email #}
                <div class="form-group">
                    <label for="{{ form.email.vars.id }}" class="form-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                        Adresse email
                    </label>
                    {{ form_widget(form.email, {
                        'attr': {
                            'class': 'form-input',
                            'placeholder': 'exemple@blogsphere.com'
                        }
                    }) }}
                    {{ form_errors(form.email) }}
                </div>

                {# Mot de passe #}
                <div class="form-group">
                    <label for="{{ form.password.vars.id }}" class="form-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        Mot de passe
                    </label>
                    {{ form_widget(form.password, {
                        'attr': {
                            'class': 'form-input',
                            'placeholder': 'Minimum 8 caractères'
                        }
                    }) }}
                    {{ form_errors(form.password) }}
                </div>

                {# Confirmation mot de passe #}
                {% if form.password_confirm is defined %}
                <div class="form-group">
                    <label for="{{ form.password_confirm.vars.id }}" class="form-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        Confirmer le mot de passe
                    </label>
                    {{ form_widget(form.password_confirm, {
                        'attr': {
                            'class': 'form-input',
                            'placeholder': 'Répétez le mot de passe'
                        }
                    }) }}
                    {{ form_errors(form.password_confirm) }}
                </div>
                {% endif %}

                {# Rôles (si disponible) #}
                {% if form.roles is defined %}
                <div class="form-group">
                    <label class="form-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
                        </svg>
                        Rôle
                    </label>
                    {{ form_widget(form.roles, {'attr': {'class': 'form-select'}}) }}
                    {{ form_errors(form.roles) }}
                </div>
                {% endif %}

                {# Statut #}
                {% if form.isActive is defined %}
                <div class="form-group">
                    <label class="form-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        Statut
                    </label>
                    {{ form_widget(form.isActive, {'attr': {'class': 'form-select'}}) }}
                    {{ form_errors(form.isActive) }}
                </div>
                {% endif %}

                {# Prénom #}
                {% if form.firstName is defined %}
                <div class="form-group">
                    <label for="{{ form.firstName.vars.id }}" class="form-label">
                        Prénom <span style="color: #ef4444;">*</span>
                    </label>
                    {{ form_widget(form.firstName, {
                        'attr': {
                            'class': 'form-input',
                            'placeholder': 'Entrez le prénom'
                        }
                    }) }}
                    {{ form_errors(form.firstName) }}
                </div>
                {% endif %}

                {# Nom de famille #}
                {% if form.lastName is defined %}
                <div class="form-group">
                    <label for="{{ form.lastName.vars.id }}" class="form-label">
                        Nom de famille <span style="color: #ef4444;">*</span>
                    </label>
                    {{ form_widget(form.lastName, {
                        'attr': {
                            'class': 'form-input',
                            'placeholder': 'Entrez le nom de famille'
                        }
                    }) }}
                    {{ form_errors(form.lastName) }}
                </div>
                {% endif %}

                {# Biographie #}
                {% if form.bio is defined %}
                <div class="form-group">
                    <label for="{{ form.bio.vars.id }}" class="form-label">
                        Biographie
                    </label>
                    {{ form_widget(form.bio, {
                        'attr': {
                            'class': 'form-input',
                            'placeholder': 'Décrivez l\'utilisateur...',
                            'rows': 4
                        }
                    }) }}
                    {{ form_errors(form.bio) }}
                </div>
                {% endif %}

                {# Info box #}
                <div class="info-box">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    <div>
                        <strong>Note :</strong> L'utilisateur recevra un email de confirmation avec ses identifiants.
                    </div>
                </div>

                {# Boutons d'action #}
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                            <polyline points="17 21 17 13 7 13 7 21"></polyline>
                            <polyline points="7 3 7 8 15 8"></polyline>
                        </svg>
                        Créer l'utilisateur
                    </button>
                    <a href="{{ path('admin_users_index') }}" class="btn btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                        Annuler
                    </a>
                </div>

                {{ form_end(form) }}
            </div>
        </div>
    </div>
</div>
{% endblock %}
